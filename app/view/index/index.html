<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <meta name="renderer" content="webkit"/>
    <title>QQ交流群： 751968139</title>
    <link rel="icon" href="//q1.qlogo.cn/g?b=qq&nk=1043897710&s=640" />
    <link href="//lib.baomitu.com/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/static/v1/css/oneui.min-5.4.css" rel="stylesheet"/>
    <script src="//lib.baomitu.com/jquery/1.12.4/jquery.min.js"></script>
    <script src="//lib.baomitu.com/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="/static/v1/js/layer.js"></script>
    <style>
        @-moz-keyframes move{
            0%{transform:translateX(100%);}
            50%{transform:translateX(0);}
            100%{transform:translateX(-100%);}
        }
        @-webkit-keyframes move{
            0%{transform:translateX(100%);}
            50%{transform:translateX(0);}
            100%{transform:translateX(-100%);}
        }
        @keyframes move{
            0%{transform:translateX(100%);}
            50%{transform:translateX(0);}
            100%{transform:translateX(-100%);}
        }
        .cs{
            display: block;
            -moz-animation: move 10s infinite linear;
            -webkit-animation: move 10s infinite linear;
            animation: move 10s infinite linear;
            white-space: nowrap;
        }

    </style>
</head>
<body style="background: url(/static/v1/img/back.png)">
<div class="content">
    <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 center-block" style="float: none;">
        <div class="block block-rounded" style="background: url(/static/v1/img/bj.jpeg);background-size:cover;">
            <div class="block-content block-content-full text-center">
                <div class="mb-3">
                    <img class="img-avatar img-avatar96" src="//q1.qlogo.cn/g?b=qq&nk=1043897710&s=640" alt="">
                </div>
                <div class="fs-5 fw-semibold text-white">贝塔先生๑</div>
                <div class="fs-sm fw-medium text-muted text-white">追寻自然，实现理想</div>
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 center-block" style="float: none; font-size: 12px;">
        <div class="alert alert-primary alert-dismissible" role="alert" style="overflow: hidden;">
            <p class="mb-0 cs">
                公告：如果刷了不成功，请手动去游戏通关过第一关在来刷取尝试
            </p>
        </div>
    </div>
    <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 center-block" style="float: none;">
        <div class="block block-rounded">
            <div class="block-header">
                <h3 class="block-title">
                    秒通关 <small>程序交流群： 751968139</small>
                </h3>
            </div>
            <div class="block-content">
                <div class="row push">
                    <div class="col-lg-12">
                        <div id="msg" style="display: none">
                        </div>
<!--                        <div class="mb-4">-->
<!--                            <label class="form-label" for="uid">UID</label>-->
<!--                            <div class="input-group">-->
<!--                                <input type="number" class="form-control" id="uid" name="uid" placeholder="请输入你的羊了个羊的UID">-->
<!--                                <button onclick="get_user_token()" type="button" class="btn btn-dark">获取Token</button>-->
<!--                            </div>-->
<!--                        </div>-->
                        <div class="mb-4">
                            <label class="form-label" for="token">Token</label>
                            <input type="text" class="form-control" id="token" name="token" value="" placeholder="请输入你Token(不知道请用uid获取)">
                        </div>
                        <div class="row g-3 mb-4">
                            <div class="col-12">
                                <label class="form-label" for="type">刷取类型</label>
                                <select class="form-select" id="type" name="type">
                                    <option value="1">每日话题类型</option>
                                    <option value="2">羊群类型</option>
                                    <option value="3" selected>全部都刷</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label" for="type">通关时间</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="time" name="time" placeholder="请输入你的通关时间秒过请填写0">
                                    <span class="input-group-text input-group-text-alt">分</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <label class="form-label" for="type">通关次数</label>
                                <div class="input-group">
                                    <input type="number" class="form-control" id="number" name="number" placeholder="请输入你的通关的次数">
                                    <span class="input-group-text input-group-text-alt">次</span>
                                </div>
                            </div>
                        </div>
                        <button type="button" onclick="ajax_button()" class="btn btn-primary btn-block">立 即 提 交</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 center-block" style="float: none;">
        <div class="block block-rounded">
            <div class="content py-3">
                <div class="btn-group" role="group" aria-label="Horizontal Alternate Primary">
                    <a href="//3oo.me" class="btn btn-alt-primary">作者博客</a>
                    <button type="button" class="btn btn-alt-primary">使用帮助</button>
                    <a href="//3oo.me" class="btn btn-alt-primary">贝塔小屋</a>
                </div>
            </div>
        </div>
    </div>
    <!-- 请留版权 我他妈谢谢你了 没留版权是孤儿～ -->
    <div class="col-xs-12 col-sm-10 col-md-8 col-lg-6 center-block" style="float: none;">
        <div class="block block-rounded">
            <div class="content py-3">
                <div class="row fs-sm">
                    <div class="col-sm-6 order-sm-2 py-1 text-center text-sm-end">
                        Crafted with <i class="glyphicon glyphicon-heart text-danger"></i> by <a class="fw-semibold" href="//3oo.me" target="_blank">贝塔先生๑</a>
                    </div>
                    <div class="col-sm-6 order-sm-1 py-1 text-center text-sm-start">
                        <a class="fw-semibold" href="//3oo.me" target="_blank">羊了个羊</a> © <span data-toggle="year-copy" class="js-year-copy-enabled">2022</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="//lib.baomitu.com/jquery/1.12.4/jquery.min.js"></script>
<script src="/static/v1/js/layer.js"></script>
<script>
    const button_help = () => {
        layer.confirm('进入羊了个羊小程序，找到俺的名片就能看到UID记住这几个数字，回到网站输入即可', {
            btn: ['确定', '取消'],
            closeBtn: 0,
        })
    }

    const get_user_token = () => {
        const uid = $("#uid").val();
        if (uid === ''){
            layer.confirm('输入的uid不正确，请检查输入的uid', {
                btn: ['确定', '取消'],
                closeBtn: 0,
            })
            return;
        }
        layer.msg('获取中...', {
            icon: 16,
            shade: 0.3,
            time: 9999999
        });
        $.ajax({
            type: "post",
            url: "index/getUserToken",
            dataType: "json",
            data: {
                "uid": uid,
            },
            success: function (data) {
                if(data.code === 200){
                    layer.closeAll();
                    layer.msg('获取成功',{icon:1,time:1500,share:0.3});
                    $("#token").attr("value",data.data);
                }else{
                    layer.confirm(data.message, {
                        btn: ['确定', '取消'],
                        closeBtn: 0,
                    })
                }
            },
            error: function () {
                layer.confirm('获取失败，请稍后尝试', {
                    btn: ['确定', '取消'],
                    closeBtn: 0,
                })
            }
        });
    }
    console.log("\n%c BeiTa By 贝塔先生๑ %c http://3oo.me ","color:#fff;background:#000;padding:5px 0","color:#fff;background:#fff;padding:5px 0");
    const ajax_button = () => {
        // const uid = $("#uid").val();
        const type = $("#type").val();
        const time = $("#time").val();
        const number = $("#number").val();
        const token = $("#token").val();

        // if (uid === '') {
        //     layer.msg('uid不正确，请检查填写的uid', {icon: 2, time: 1500, share: 0.3});
        //     return;
        // }
        if (time === '') {
            layer.msg('时间不正确，请检查填写的时间', {icon: 2, time: 1500, share: 0.3});
            return;
        }
        if (number === '') {
            layer.msg('通关次数不正确，请检查填写的通关次数', {icon: 2, time: 1500, share: 0.3});
            return;
        }
        if (number === '') {
            layer.msg('Token不正确，请检查填写的Token', {icon: 2, time: 1500, share: 0.3});
            return;
        }
        func_digui(type, time, number, token);
    }
    function func_digui(type, time, number, token)
    {
        for(let i=0; i<number+1; i++){
            if(i === 0){
                let nums = number;
                layer.msg('通关中... 还剩余 [ '+ (number) + ' ] 次未刷取！', {
                    icon: 16,
                    shade: 0.3,
                    time: 9999999
                });
                $.ajax({
                    type: "post",
                    url: "index/ajax",
                    dataType: "json",
                    data: {
                        "token": token,
                        "type": type,
                        "time": time,
                        "number": number
                    },
                    success:function(data){
                        if(number === 0){
                            $('#msg').hide();
                            return layer.confirm('本次全部通关成功！', {
                                btn: ['确定', '取消'],
                                closeBtn: 0,
                            })
                        }else{
                            if (data.code === 200){
                                return func_digui(type, time, number - 1, token);
                            }else{
                                layer.confirm(data.message, {
                                    btn: ['确定', '取消'],
                                    closeBtn: 0,
                                })
                                number = 0;
                            }
                        }
                    },
                    error: function () {
                        $('#msg').show();
                        $('#msg').html('<div class="alert alert-primary alert-dismissible" role="alert"><div class="flex-grow-1"><p class="mb-0">羊了个羊，通关中失败进行下一轮！</p></div></div>')
                        return func_digui(uid, type, time, number - 1, token);
                    }
                });
            }
        }
    }
</script>
</body>
</html>